---
title: "HW1"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{HW1}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE,warning=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(dplyr)
```

```{r setup}
plot(1:10)
```

## Q0: Survey

Question 0A: Please let us know your preferred name.

> Connie. 

Question 0B: Please read the syllabus in its entirety and write, “I have read and understood the entire syllabus,” for this question. If you have any questions about the syllabus (for example, on the homework submission policy or collaboration policy), you may ask them here.

> I have read and understood the entire syllabus. 

Question 0C: If any, please briefly describe the courses you have taken at UW that involve coding (in any language) so far and how familiar/comfortable you are in coding in R. (Note: We do not expect you to have taken any such courses already.)

> BIOST 514 and 515 involves codingn in R. I am comfortable with coding in R. I have created shiny apps and done simulation studies in R. 

Question 0D: What do you hope to learn from this course? (It is alright if you leave this blank, but it would be helpful to hear your thoughts.)

> I hope to learn more about how to write R packages, code testing and debugging. 

## Q1: Setting up an R package and GitHub

> done. 

## Q2: Simulating the Central Limit Theorem

### 2A

*Read the function (either at the URL provided or by typing generate_data into your console), and in one to three sentences, describe the input and output of the provided function and what the function is doing. You may use equations if needed.*

```{r}
source("https://raw.githubusercontent.com/linnykos/561_s2024_public/main/homework1/generate_data.R")
```

> The function takes the number of samples we wish to generate as input and outputs a vector of numeric values generated from the normal, gamma, and chi-squared distributions. More specifically, the function first randomly generates a number between (1,2,3) n times (n is the number of samples we wish to generate). Then for each index, we randomly generate a value based on the distribution these numbers correspond at each index, where 1 corresponds to Normal(10,1), 2 corresponds to Gamma(2,2), and 3 corresponds to ChiSquare(df=3). 

### 2B

```{r, results='hide'}
mean(generate_data(n=10))
```

*Repeat the above code 10,000 times (i.e., 10,000 trials, but keeping n=10 for each trial), and plot a histogram of the 10,000 different empirical means with 100 breaks (i.e., breaks = 100). Repeat this process for n with values of 1, 2, 3, 5, 10, and 100, and plot these six histograms in order of increasing n.*

```{r}
sim_clt <- function(samp) {
  store <- lapply(rep(samp,1000),function(x) generate_data(x))
  store <- unlist(lapply(store,mean))
  store
}

#plot six histograms in desired format
par(mfrow=c(2,3))
hist(sim_clt(1),breaks=100,xlab="Value",main="Sample Size: 1")
hist(sim_clt(2),breaks=100,xlab="Value",main="Sample Size: 2")
hist(sim_clt(3),breaks=100,xlab="Value",main="Sample Size: 3")
hist(sim_clt(5),breaks=100,xlab="Value",main="Sample Size: 5")
hist(sim_clt(10),breaks=100,xlab="Value",main="Sample Size: 10")
hist(sim_clt(100),breaks=100,xlab="Value",main="Sample Size: 100")
```

### 2C

*In one to three sentences, write how the plot you reproduced helps to verify the Central Limit Theorem.*

The Central Limit Theorem states that the distribution of the sample mean converges to a normal distribution as sample size gets larger. Here, we can see that the larger the sample size, the closer our resulting histogram resembles that of a normal distribution. This shows that as sample size increases the distribution of the sample mean converges to a normal distribution. 

## Q3: Basic data analysis

```{r}
df <- read.csv("https://raw.githubusercontent.com/linnykos/561_s2024_public/main/homework1/sea-ad.csv")
```

### Question 3A

*Describe, in two to four sentences, what the head(df) and summary(df) results display.*

> The head(df) result displays the first 6 rows of the df dataframe. The summar(df) result provides a summary for each variable in the df dataframe. 

```{r, results='hide'}
head(df)
summary(df)
```

### Question 3B

*Use a simple function to print out the dimensionality of df (i.e., how many rows and columns there are). What is the class of df?*

> The dim(df) result shows that df has 84 rows and 7 columns. The class(df) result shows that df is a data frame. 

```{r}
dim(df)
class(df)
```


### Question 3C

*You’ll note that in summary(df), the variable Age.at.Death is a character, even though it should be a numeric. This is because there are values of 90+. As a simple diagnostic, 1) replace all the 90+ values in df$Age.at.Death with 90, 2) convert df$Age.at.Death from a character to a numeric, and 3) plot a histogram of df$Age.at.Death.*

```{r}
df <- df %>% 
  mutate(Age.at.Death=ifelse(Age.at.Death=="90+","90",Age.at.Death))

df$Age.at.Death <- as.numeric(df$Age.at.Death)

hist(df$Age.at.Death,xlab="Donor Age",main="Histogram of Donor Age")
```

### Question 3D

*The summary() function is much more useful when the columns of df are factors, not characters. Write some lines of code to convert the variables Sex, APOE4.Status, Cognitive.Status, and Braak to be factors. (This should take less than 10 lines of code.)*

```{r}
cols <- c("Sex","APOE4.Status","Cognitive.Status","Braak")
df[cols] <- lapply(df[cols], factor)
```

### Question 3E

*With this new version of df, after finishing the previous questions, show the result of summary(df). In one sentence, describe how the summary here (in Question 3E) is more informative than the summary shown at the start of Question 3.*

> The summary here is more informative because it displays the number of samples in each category for the variables we transformed, instead of just indicating that these variables are characters.

```{r}
summary(df)
```

### Question 3F

*Using the table() function, display the relation between Braak and Cognitive.Status. Please look at ?table (for the documentation of table()) if you are unfamiliar with this function.*

```{r}
table(df$Braak, df$Cognitive.Status)
```


### Question 3G

*This question will be slightly challenging. The table() function is not as useful when there are many unique values (such as in Last.CASI.Score). To overcome this, look up the documentation for the cut and quantile functions. The goal is to use the table(), cut(), and quantile() to show the relation of the quantiles of Last.CASI.Score with Cognitive.Status. You will want to use na.rm=TRUE when using the quantile() function. In one to two sentences, describe what you can learn from the relation between Last.CASI.Score and Cognitive.Status based on this result.*

> The higher the quantile of Last.CASI.Score, the more likely the sample does not have dementia. For 25% and 50% quantile, almost all samples have dementia, for 75% and 100% quantile, almost all samples do not have dementia. 

```{r}
quantile(df$Last.CASI.Score,na.rm = TRUE)
df$quant.CASI <- cut(df$Last.CASI.Score,c(66,80,89,95,99),labels=c("25%", "50%", "75%","100%"),include.lowest = TRUE)
table(df$quant.CASI,df$Cognitive.Status)
```



